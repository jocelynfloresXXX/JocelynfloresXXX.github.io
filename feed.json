{
    "version": "https://jsonfeed.org/version/1",
    "title": "WE",
    "subtitle": "",
    "icon": "https://2memos.xyz/images/favicon.ico",
    "description": "",
    "home_page_url": "https://2memos.xyz",
    "items": [
        {
            "id": "https://2memos.xyz/2021/01/13/%E8%B7%AF%E7%94%B1%E6%9D%BF%E5%9D%97/",
            "url": "https://2memos.xyz/2021/01/13/%E8%B7%AF%E7%94%B1%E6%9D%BF%E5%9D%97/",
            "title": "路由板块",
            "date_published": "2021-01-13T11:00:25.975Z",
            "content_html": "<h1 id=\"写在前面\"><a class=\"anchor\" href=\"#写在前面\">#</a> 写在前面</h1>\n<p><img data-src=\":title/:22.jpg\" alt=\"提示\"></p>\n<h1 id=\"第一章ospf\"><a class=\"anchor\" href=\"#第一章ospf\">#</a> 第一章【OSPF】</h1>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>OSPF【开放最短路径优先】（现网使用最多）【注：OSPF查看RFC2328文档】</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token number\">1</span>：动态路由协议分为：</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    距离矢量路由协议<span class=\"token punctuation\">(</span>RIP,EIGRP,BGP<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    链路状态路由协议<span class=\"token punctuation\">(</span>OSPF,ISIS<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token number\">2</span>，基础：管理距离<span class=\"token punctuation\">(</span>AD<span class=\"token punctuation\">)</span>:【注】管理距离不会传递，值越小越优</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    CISCO的AD值<span class=\"token punctuation\">[</span>ospf:110  static:1<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    HW的AD值<span class=\"token punctuation\">[</span>ospf:10 static:60<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token number\">3</span>，度量值：Metric【ospf用cosf来表示，并且ospf只用带宽来表示，值<span class=\"token operator\">=</span><span class=\"token number\">100</span>除以带宽<span class=\"token punctuation\">(</span>M<span class=\"token punctuation\">)</span>】</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>，cost计算方法：路由收接口进行累加，<span class=\"token punctuation\">(</span>可以手动调,在收接口）</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>cost：E口<span class=\"token operator\">=</span>10m，F口<span class=\"token operator\">=</span>100m，G口<span class=\"token operator\">=</span>1000m，TEN <span class=\"token assign-left variable\">G</span><span class=\"token operator\">=</span>10000m，S<span class=\"token operator\">=</span><span class=\"token number\">1</span>.544m <span class=\"token assign-left variable\">cost</span><span class=\"token operator\">=</span><span class=\"token number\">100</span>/1.544<span class=\"token operator\">=</span><span class=\"token number\">64</span>【注国内S<span class=\"token operator\">=</span>2m】</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token number\">100</span>/带宽<span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span>：其中100可以修改，命令：bandwidth-reference <span class=\"token number\">10000</span>。</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token number\">4</span>，OSPF报文类型：</pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>，hello：建立<span class=\"token punctuation\">(</span>同区域，同网段<span class=\"token punctuation\">)</span>和维护<span class=\"token punctuation\">(</span>周期性发送，10s一次，40s超时，1800s重新泛洪，</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    3600s路由丢失<span class=\"token punctuation\">)</span>OSPF邻居关系。</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>，DBD：链路状态数据库描述信息<span class=\"token punctuation\">(</span>描述LSDB中LSA头部的信息<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>，LSR：链路状态请求<span class=\"token punctuation\">(</span>DBD中对应的路由信息<span class=\"token punctuation\">)</span>,向OSPF邻居请求链路状态信息。</pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>，LSU：链路状态更新<span class=\"token punctuation\">(</span>发送路由信息<span class=\"token punctuation\">)</span>（包含一条或多条LSA）</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>，LSACK：链路状态确认包，对LSU中的LSA进行确认。</pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token number\">5</span>，OSPF区域：</pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>，骨干区域：area0<span class=\"token punctuation\">(</span>不能修改<span class=\"token punctuation\">)</span>。</pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>，非骨干区域；arother<span class=\"token punctuation\">(</span>可以修改<span class=\"token punctuation\">)</span>。</pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token number\">6</span>，OSPF的三张表：</pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>，邻居表；建立的邻居关系如何。查看：show <span class=\"token function\">ip</span> ospf neighbor。</pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>，拓扑表；所有有关OSPF传递过来的信息。查看：show <span class=\"token function\">ip</span> ospf database。</pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>，路由表；使能的路由加入表项。 查看：show <span class=\"token function\">ip</span> route ospf。</pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token number\">7</span>，OSPF区域的配置<span class=\"token punctuation\">(</span>PK实验步骤<span class=\"token punctuation\">)</span>：</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>R1：</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>Router<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token comment\">#router ospf 1   &lt;1 代表进程，不同的进程相对独立 ></span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>Router<span class=\"token punctuation\">(</span>config-router<span class=\"token punctuation\">)</span><span class=\"token comment\">#network 172.16.12.0 0.0.0.255 area 1   &lt; 配置网段，反掩码，和区域 1></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>R2：</pre></td></tr><tr><td data-num=\"31\"></td><td><pre>Router<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token comment\">#router ospf 1</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>Router<span class=\"token punctuation\">(</span>config-router<span class=\"token punctuation\">)</span><span class=\"token comment\">#network 172.16.12.0 0.0.0.255 area 1</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>Router<span class=\"token punctuation\">(</span>config-router<span class=\"token punctuation\">)</span><span class=\"token comment\">#network 172.16.23.0 0.0.0.255 area 0</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>R3：</pre></td></tr><tr><td data-num=\"35\"></td><td><pre>Router<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token comment\">#router ospf 1</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>Router<span class=\"token punctuation\">(</span>config-router<span class=\"token punctuation\">)</span><span class=\"token comment\">#network 172.16.23.0 0.0.0.255 area 0</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>Router<span class=\"token punctuation\">(</span>config-router<span class=\"token punctuation\">)</span><span class=\"token comment\">#network 172.16.34.0 0.0.0.255 area 2</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>R4：</pre></td></tr><tr><td data-num=\"39\"></td><td><pre>Router<span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token comment\">#router ospf 1</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>Router<span class=\"token punctuation\">(</span>config-router<span class=\"token punctuation\">)</span><span class=\"token comment\">#network 172.16.34.0 0.0.0.255 area 2</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>验证：</pre></td></tr><tr><td data-num=\"42\"></td><td><pre>Router<span class=\"token comment\">#show ip ospf neighbor（查看邻居）</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>此时R1能ping通R4（由于OSPF的自动学习）</pre></td></tr><tr><td data-num=\"44\"></td><td><pre>思考：为什么能通？——》有路由<span class=\"token punctuation\">(</span>为什么?<span class=\"token punctuation\">)</span>——》建立邻居关系<span class=\"token punctuation\">(</span>为什么?<span class=\"token punctuation\">)</span>——》邻居表正常<span class=\"token punctuation\">(</span>为什么?<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>    - ——》宣告配置没问题。</pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token number\">8</span>，OSPF建立邻居的过程：七种状态 【注，重置进程命令：clear <span class=\"token function\">ip</span> ospf process】</pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>，down：</pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token number\">1</span>，没有宣告。</pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token number\">2</span>，接口down。</pre></td></tr><tr><td data-num=\"50\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>，init<span class=\"token punctuation\">(</span>初始化<span class=\"token punctuation\">)</span>：</pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token number\">1</span>，互发hello包。</pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    <span class=\"token number\">2</span>，router-id：标识对方设备在ospf中的名称。</pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    router-id如何选举：（1）手动（命令：router-id <span class=\"token number\">2.2</span>.2.2）。</pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    （2）逻辑接口IP地址最大<span class=\"token punctuation\">(</span>环回口<span class=\"token punctuation\">)</span>。（3）物理接口IP地址最大。</pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token number\">3</span>，跳转条件：设备之间了解了对方的router-id。</pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>，two-way：</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token number\">1</span>， 选举DR，【注：DR不抢占。】</pre></td></tr><tr><td data-num=\"58\"></td><td><pre>\t<span class=\"token number\">2</span>，DR概念：DR指定路由器，收集同一广播域其他DRother路由信息，进行打包发送。</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>\t<span class=\"token number\">3</span>，选举过程：（1）DR优先级：越大越优<span class=\"token punctuation\">(</span>默认为1，为0时不参与选举，范围0-255<span class=\"token punctuation\">)</span>。</pre></td></tr><tr><td data-num=\"60\"></td><td><pre>\t    【注：优先级0的配置命令：ip ospf priority <span class=\"token number\">0</span>】</pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        <span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>  Router-id:越大越优。</pre></td></tr><tr><td data-num=\"62\"></td><td><pre>\t<span class=\"token number\">4</span>，DR选举很慢，10-30s。</pre></td></tr><tr><td data-num=\"63\"></td><td><pre>\t<span class=\"token number\">5</span>，优化：ip ospf network point-to-point<span class=\"token punctuation\">(</span>两端同时配置<span class=\"token punctuation\">)</span> 配置为点对点，</pre></td></tr><tr><td data-num=\"64\"></td><td><pre>\t    不会选举DR。</pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>，exstart</pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>，exchange</pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span>，loading</pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span>，full（最稳定）</pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token number\">9</span>，OSPF的组播地址：</pre></td></tr><tr><td data-num=\"70\"></td><td><pre>    <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>，224.0.0.5</pre></td></tr><tr><td data-num=\"71\"></td><td><pre>\t<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>，224.0.0.6</pre></td></tr><tr><td data-num=\"72\"></td><td><pre>\t<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span>，DR接收 <span class=\"token number\">224.0</span>.0.6 DRother发送。</pre></td></tr><tr><td data-num=\"73\"></td><td><pre>\t<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span>，DRother接收 <span class=\"token number\">224.0</span>.0.5 DR发送。</pre></td></tr><tr><td data-num=\"74\"></td><td><pre>\t<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span>，LSU：路由信息,224.0.0.6就是LSU。</pre></td></tr><tr><td data-num=\"75\"></td><td><pre><span class=\"token number\">10</span>，DRother与DRother之间是two-way。（不传递路由信息）</pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token number\">11</span>，two-way与full：</pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    <span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>，2way—邻居（不传递路由信息）。</pre></td></tr><tr><td data-num=\"78\"></td><td><pre>\t<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>，full—邻接 （传递所有信息）。</pre></td></tr><tr><td data-num=\"79\"></td><td><pre><span class=\"token number\">12</span>，稳定状态下只能看到Hello包。</pre></td></tr></table></figure><h1 id=\"第二章交换基础\"><a class=\"anchor\" href=\"#第二章交换基础\">#</a> 第二章【交换基础】</h1>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token number\">1</span>，交换机类型：</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    二层交换机。</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t三层交换机。</pre></td></tr></table></figure>",
            "tags": []
        },
        {
            "id": "https://2memos.xyz/2021/01/10/hello-world/",
            "url": "https://2memos.xyz/2021/01/10/hello-world/",
            "title": "Hello",
            "date_published": "2021-01-10T12:03:25.104Z",
            "content_html": "<p>Welcome to <span class=\"exturl\" data-url=\"aHR0cHM6Ly9oZXhvLmlvLw==\">Hexo</span>! This is my second blog post.Author:Ruri Shimotsuki @優萌初華. If you get any problems when using Hexo, you can ask me on <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2pvY2VseW5mbG9yZXNYWFg=\">GitHub</span>.</p>\n",
            "tags": []
        }
    ]
}